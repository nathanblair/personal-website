<script>
  import IconTray from "../IconTray.svelte"
  import IconLink from "../IconLink.svelte"
  import Toggle from "../Toggle.svelte"
  import Button from "../Button.svelte"

  import { page_name_store, drawer_toggle_status } from "../../stores.js"

  // FIXME These buttons that navigate should be broken out into a NavButton
  // Which has a callback to page_name_store.set and the argument can be an
  // attribute in the element (the aria-label since its required anyway)

  function settings_click() {
    page_name_store.set("Settings")
  }

  function home_click() {
    page_name_store.set("Main")
  }

  /** @param {Event} e */
  function menu_toggled_callback(e) {
    // @ts-ignore
    drawer_toggle_status.set(e.currentTarget?.checked)
  }
</script>

<div id="app-bar">
  <Toggle
    id="menu-toggle"
    src_off="menu"
    src_on="close"
    title="Menu"
    on_change_handler={menu_toggled_callback}
    class_list="block pointer"
  />
  <IconTray id="app-shortcuts">
    <IconLink link_target="https://github.com/nathanblair" title="GitHub">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
        <path
          d="m 10.703226,25.766353 c 0,0.132339 -0.148387,0.23821 -0.335484,0.23821 -0.212903,0.01985 -0.36129,-0.08602 -0.36129,-0.23821 0,-0.132339 0.148387,-0.23821 0.335483,-0.23821 0.193549,-0.01985 0.361291,0.08602 0.361291,0.23821 z M 8.6967742,25.468591 c -0.045161,0.132339 0.083871,0.284528 0.2774193,0.32423 0.167742,0.06617 0.3612904,0 0.4,-0.132339 0.03871,-0.132339 -0.083871,-0.284528 -0.2774193,-0.344081 -0.1677419,-0.04632 -0.3548387,0.01985 -0.4,0.15219 z m 2.8516128,-0.112488 c -0.187097,0.04632 -0.316129,0.17204 -0.296774,0.32423 0.01935,0.132339 0.187097,0.218359 0.380645,0.17204 0.187097,-0.04632 0.316129,-0.17204 0.296774,-0.304379 -0.01935,-0.125722 -0.193548,-0.211742 -0.380645,-0.191891 z M 15.793548,0 C 6.8451613,0 0,6.9676348 0,16.145327 0,23.48351 4.5032258,29.762983 10.935484,31.97304 c 0.825806,0.15219 1.116129,-0.370548 1.116129,-0.800649 0,-0.41025 -0.01935,-2.673243 -0.01935,-4.0628 0,0 -4.516129,0.992541 -5.4645161,-1.971847 0,0 -0.7354838,-1.925529 -1.7935484,-2.421799 0,0 -1.4774193,-1.038859 0.1032259,-1.019008 0,0 1.6064516,0.132339 2.4903225,1.70717 1.4129033,2.554137 3.7806451,1.819657 4.7032261,1.38294 0.148387,-1.05871 0.567742,-1.79319 1.032258,-2.229908 -3.6064518,-0.41025 -7.2451615,-0.946222 -7.2451615,-7.311716 0,-1.819658 0.4903226,-2.732795 1.5225807,-3.897376 C 7.2129032,10.917946 6.6645161,9.1446071 7.5483871,6.8551469 8.8967742,6.425046 12,8.6417199 12,8.6417199 c 1.290323,-0.3705485 2.677419,-0.5624397 4.051613,-0.5624397 1.374193,0 2.76129,0.1918912 4.051613,0.5624397 0,0 3.103226,-2.2232909 4.451613,-1.786573 0.883871,2.2960772 0.335484,4.0627991 0.167742,4.4929001 1.032258,1.171198 1.664516,2.084335 1.664516,3.897376 0,6.385344 -3.8,6.894849 -7.406452,7.311716 0.593549,0.522738 1.096774,1.515278 1.096774,3.070259 0,2.229907 -0.01935,4.98917 -0.01935,5.531759 0,0.430101 0.296774,0.952839 1.116129,0.800649 C 27.625806,29.762983 32,23.48351 32,16.145327 32,6.9676348 24.741935,0 15.793548,0 Z M 6.2709677,22.821816 c -0.083871,0.06617 -0.064516,0.218359 0.045161,0.344081 0.1032258,0.105871 0.2516129,0.152189 0.3354839,0.06617 0.083871,-0.06617 0.064516,-0.218359 -0.045161,-0.34408 -0.1032258,-0.105871 -0.2516129,-0.15219 -0.3354839,-0.06617 z M 5.5741935,22.285844 c -0.045161,0.08602 0.019355,0.191891 0.1483871,0.258061 0.1032259,0.06617 0.2322581,0.04632 0.2774194,-0.04632 0.045161,-0.08602 -0.019355,-0.191891 -0.1483871,-0.25806 -0.1290323,-0.0397 -0.2322581,-0.01985 -0.2774194,0.04632 z m 2.0903226,2.35563 c -0.1032258,0.08602 -0.064516,0.284528 0.083871,0.41025 0.1483871,0.15219 0.3354839,0.17204 0.4193548,0.06617 0.083871,-0.08602 0.045161,-0.284528 -0.083871,-0.41025 -0.1419355,-0.152189 -0.3354839,-0.17204 -0.4193548,-0.06617 z m -0.7354838,-0.97269 c -0.1032258,0.06617 -0.1032258,0.23821 0,0.390399 0.1032258,0.15219 0.2774193,0.218359 0.3612903,0.15219 0.1032258,-0.08602 0.1032258,-0.258061 0,-0.41025 C 7.2,23.648933 7.0322581,23.582764 6.9290323,23.668784 Z"
        />
      </svg>
    </IconLink>

    <IconLink
      link_target="https://www.linkedin.com/in/engineerblair/"
      title="LinkedIn"
    >
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M29.63.001H2.362C1.06.001 0 1.034 0 2.306V29.69C0 30.965 1.06 32 2.362 32h27.27C30.937 32 32 30.965 32 29.69V2.306C32 1.034 30.937.001 29.63.001z"
        />
        <path
          d="M4.745 11.997H9.5v15.27H4.745zm2.374-7.6c1.517 0 2.75 1.233 2.75 2.75S8.636 9.9 7.12 9.9a2.76 2.76 0 0 1-2.754-2.753 2.75 2.75 0 0 1 2.753-2.75m5.35 7.6h4.552v2.087h.063c.634-1.2 2.182-2.466 4.5-2.466 4.806 0 5.693 3.163 5.693 7.274v8.376h-4.743V19.84c0-1.77-.032-4.05-2.466-4.05-2.47 0-2.85 1.93-2.85 3.92v7.554h-4.742v-15.27z"
          fill="#fff"
        />
      </svg>
    </IconLink>

    <IconLink link_target="mailto:me@nathanblair.rocks" title="Email">
      <span>email</span>
    </IconLink>

    <Button
      id="settings"
      src="settings"
      title="Open App Settings"
      on:click={settings_click}
    />

    <Button id="home" src="home" title="Go Home" on:click={home_click} />
  </IconTray>
</div>

<style>
  #app-bar {
    position: relative;
    margin: 8px;
    display: flex;
    justify-content: space-between;
    font-size: 2em;
  }

  :global(#menu-toggle-label) {
    padding: 4px;
  }
</style>
